# How to get started with Ethereum blockchain development

## Using Truffle Suite and React

## Prerequisites:
* Node JS
* Understanding of React framework
* Understanding of command-line
* Terminal of choice

## How to begin
1. Install truffle. We're going to install truffle globally, using npm. Enter into your terminal:

    `npm install -g truffle`

1. Make a directory for your new project and navigate to your new directory:

    `mkdir truffle-example`

    `cd truffle-example`

1. Unbox a truffle box. We're going to use one called drizzle. There are many other boxes available too: https://www.trufflesuite.com/boxes

    `truffle unbox drizzle`

1. Let's see what we have. Open the contents in your text editor of choice. For example, I'm using vs-code `code` command:

    `code .`


    ## (Brief explanation on what we have inside our unboxed drizzle project)

    ## Image of code editor and file structure

1. Open a new terminal window and navigate into our React app:

    `cd app`

1. Start the react app running locally on your computer:

    `npm start`

    you should see a loading... message because there is no blockchain to connect to. Let's get one running locally on our computer using [ganache-cli](https://www.npmjs.com/package/ganache-cli)

## Use ganache-cli to run a local blockchain

1. Open a new terminal window. We're going to install ganache-cli globally:

    `npm install -g ganache-cli`


1. Run ganache-cli to get a local ethereum blockchain running on your computer. 

    `ganache-cli`

    when successful, this command will provide you with 10 available accounts and corresponding private keys, each account with 100 ETH. Will also provide a mneumonic or 12-word phrase.The blockchain will listen on port 8545

1. Let's copy this 12-word mneumonic and create a command to run our blockchain as deterministic and mnemonic:

    in our code editor, we are going to edit our package.json inside our truffle-example directory. We are going to create a command called `ganache` to run our blockchain and persist it to a db. In this example, I'm using the mneumonic: 'picture tray motion shuffle action fun puzzle velvet sample trip reject beef' but you can use the mneumonic that was generated by your ganache-cli or another mneumonic as you please. Other projects should use a different mneumonic or different networkId to generate a unique blockchain. We will need to run ganache-cli with the following flags:

    * `-d` or `--deterministic`: Generate deterministic addresses based on a pre-defined mnemonic.

    * `-m` or `--mnemonic`: Use a bip39 mnemonic phrase for generating a PRNG seed, which is in turn used for hierarchical deterministic (HD) account generation.

    * `--db`: Specify a path to a directory to save the chain database. If a database already exists, ganache-cli will initialize that chain instead of creating a new one.

    * `-i` or `--networkId`: Specify the network id ganache-cli will use to identify itself (defaults to the current time or the network id of the forked blockchain if configured)

    full documentation for ganache-cli can be found here: https://github.com/trufflesuite/ganache-cli#readme

    Here is the command I'm using for this example

    `ganache-cli -d -m picture tray motion shuffle action fun puzzle velvet sample trip reject beef --db ./ganache_db -i 1`

    Your package.json file should now have 2 scripts we can run with npm: `test` and `ganache`
    ```
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
        "ganache": "ganache-cli -d -m picture tray motion shuffle action fun puzzle velvet sample trip reject beef --db ./ganache_db -i 1"
    },
    ```

1. Now every time we run this command our blockchain will remember all our past changes, users and save the history to our 'database' directory. cd to our drizzle-example and run our new command:

    `cd truffle-example`

    `npm run ganache`

    notice that a directory is created in our root directory called `ganache_db` as we described in our command. This is where blockchain history will be stored. We can add this file to our .gitignore to prevent from commiting this directory.

    end the process and re-run the command. Make sure the Available Accounts and Private Keys are identical every time you run the command.

1. Now that we have our blockchain running locally, we can compile and deploy our drizzle contracts to our local blockchain. Keep your blockchain running and open a new terminal. Navigate back to our `truffle-example` directory and let's compile our contracts.

    `cd truffle-example`
    `truffle compile`

1. Run your migrations, specifying network: develop

    `truffle migrate --network develop`

    This will deploy our contracts to our blockchain. Make sure you give it the `--network develop` so it will deploy to the blockchain running on port 8545. By default it will try to deploy to port 7545 which doesn't currently have a blockchain running. 

## Install Metamask browser extension and import your accounts

see https://medium.com/@followcoin/how-to-install-metamask-88cbdabc1d28

1. Go to https://metamask.io and install the Metamask extension for your browser of choice.

1. Once installed, click on the Metamask logo, agree to terms and conditions and create a new wallet. You will be given a 12-word mnemonic that you can use to access or recover your Metamask wallet from any computer. Make sure to store this 12-word mnemonic in a safe a secure way. Especially if you are going to use this wallet to transact on the Ethereum Mainnet.

1. Click on the top dropdown to select your network and select Localhost 8545

1. Click on the avatar in the top-right corner and select Import Account

1. Paste one of the Private Keys that is displayed when you run `npm run ganache`. For simplicity, lets copy and paste the first Private Key and click Import.

1. Metamask should now display your account with the corresponding public key (displayed under Available Accounts in the Ganache CLI) with an account balance of 100 ETH.

1. If you want, you can import your other accounts, but really we will only need one account to get started.